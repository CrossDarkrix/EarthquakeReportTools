import base64
import concurrent.futures
import json
import urllib.request
import ui
import time
from datetime import datetime

User_Agent = {'User-Agent': 'Mozilla/5.0 (Linux; U; Android 8.0; en-la; Nexus Build/JPG991) AppleWebKit/511.2 (KHTML, like Gecko) Version/5.0 Mobile/11S444 YJApp-ANDROID jp.co.yahoo.android.yjtop/4.01.1.5'}
Closed = ['0']
UIView = base64.b64decode('WwogIHsKICAgICJub2RlcyIgOiBbCiAgICAgIHsKICAgICAgICAibm9kZXMiIDogWwoKICAgICAgICBdLAogICAgICAgICJmcmFtZSIgOiAie3s1LjY2NjY2NjY2NjY2NjY2NjEsIDMzLjY2NjY2NjY2NjY2NjY2NH0sIHs5NS45OTk5OTk5OTk5OTk5ODYsIDUwLjk5OTk5OTk5OTk5OTk5M319IiwKICAgICAgICAiY2xhc3MiIDogIkxhYmVsIiwKICAgICAgICAiYXR0cmlidXRlcyIgOiB7CiAgICAgICAgICAiZmxleCIgOiAiTFJUQiIsCiAgICAgICAgICAibmFtZSIgOiAiIiwKICAgICAgICAgICJmcmFtZSIgOiAie3s5NiwgMjgyfSwgezE1MCwgMzJ9fSIsCiAgICAgICAgICAidXVpZCIgOiAiRUY4QjMwOTYtRkQ3NC00NUJFLUI3NEItRjYwNTRDNEM5RDcyIiwKICAgICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICAgImFsaWdubWVudCIgOiAibGVmdCIsCiAgICAgICAgICAidGV4dCIgOiAi55m655Sf5aC05omAOiIsCiAgICAgICAgICAiZm9udF9zaXplIiA6IDE4LAogICAgICAgICAgImZvbnRfbmFtZSIgOiAiPFN5c3RlbT4iCiAgICAgICAgfSwKICAgICAgICAic2VsZWN0ZWQiIDogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJub2RlcyIgOiBbCgogICAgICAgIF0sCiAgICAgICAgImZyYW1lIiA6ICJ7ezEwMCwgMzMuNjY2NjY2NjY2NjY2NjY0fSwgezIzNCwgNTAuOTk5OTk5OTk5OTk5OTkzfX0iLAogICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICJhdHRyaWJ1dGVzIiA6IHsKICAgICAgICAgICJmbGV4IiA6ICJMUlRCIiwKICAgICAgICAgICJmb250X25hbWUiIDogIjxTeXN0ZW0+IiwKICAgICAgICAgICJmcmFtZSIgOiAie3s5NiwgMjgyfSwgezE1MCwgMzJ9fSIsCiAgICAgICAgICAidXVpZCIgOiAiRUY4QjMwOTYtRkQ3NC00NUJFLUI3NEItRjYwNTRDNEM5RDcyIiwKICAgICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICAgImFsaWdubWVudCIgOiAiY2VudGVyIiwKICAgICAgICAgICJ0ZXh0IiA6ICIiLAogICAgICAgICAgIm5hbWUiIDogInJlZ2lvbk5hbWUiLAogICAgICAgICAgImZvbnRfc2l6ZSIgOiAyMAogICAgICAgIH0sCiAgICAgICAgInNlbGVjdGVkIiA6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAibm9kZXMiIDogWwoKICAgICAgICBdLAogICAgICAgICJmcmFtZSIgOiAie3s1LjY2NjY2NjY2NjY2NjY2NDMsIDI2OS4zMzMzMzMzMzMzMzMzMX0sIHs5NiwgNTF9fSIsCiAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgImF0dHJpYnV0ZXMiIDogewogICAgICAgICAgImZsZXgiIDogIkxSVEIiLAogICAgICAgICAgImZvbnRfbmFtZSIgOiAiPFN5c3RlbT4iLAogICAgICAgICAgImZyYW1lIiA6ICJ7ezk2LCAyODJ9LCB7MTUwLCAzMn19IiwKICAgICAgICAgICJ1dWlkIiA6ICJFRjhCMzA5Ni1GRDc0LTQ1QkUtQjc0Qi1GNjA1NEM0QzlENzIiLAogICAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgICAiYWxpZ25tZW50IiA6ICJsZWZ0IiwKICAgICAgICAgICJ0ZXh0IiA6ICLntYzluqYgXC8g57ev5bqmOiIsCiAgICAgICAgICAibmFtZSIgOiAiIiwKICAgICAgICAgICJmb250X3NpemUiIDogMTgKICAgICAgICB9LAogICAgICAgICJzZWxlY3RlZCIgOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgIm5vZGVzIiA6IFsKCiAgICAgICAgXSwKICAgICAgICAiZnJhbWUiIDogInt7MTAxLCAyNjl9LCB7MTAxLCA1MX19IiwKICAgICAgICAiY2xhc3MiIDogIkxhYmVsIiwKICAgICAgICAiYXR0cmlidXRlcyIgOiB7CiAgICAgICAgICAiZmxleCIgOiAiTFJUQiIsCiAgICAgICAgICAiZm9udF9uYW1lIiA6ICI8U3lzdGVtPiIsCiAgICAgICAgICAiZnJhbWUiIDogInt7OTYsIDI4Mn0sIHsxNTAsIDMyfX0iLAogICAgICAgICAgInV1aWQiIDogIkVGOEIzMDk2LUZENzQtNDVCRS1CNzRCLUY2MDU0QzRDOUQ3MiIsCiAgICAgICAgICAiY2xhc3MiIDogIkxhYmVsIiwKICAgICAgICAgICJhbGlnbm1lbnQiIDogImNlbnRlciIsCiAgICAgICAgICAidGV4dCIgOiAiIiwKICAgICAgICAgICJuYW1lIiA6ICJMb25naXR1ZGUiLAogICAgICAgICAgImZvbnRfc2l6ZSIgOiAyMAogICAgICAgIH0sCiAgICAgICAgInNlbGVjdGVkIiA6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAibm9kZXMiIDogWwoKICAgICAgICBdLAogICAgICAgICJmcmFtZSIgOiAie3sxOTEsIDI2OX0sIHs0MywgNTF9fSIsCiAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgImF0dHJpYnV0ZXMiIDogewogICAgICAgICAgImZsZXgiIDogIkxSVEIiLAogICAgICAgICAgImZvbnRfbmFtZSIgOiAiPFN5c3RlbT4iLAogICAgICAgICAgImZyYW1lIiA6ICJ7ezk2LCAyODJ9LCB7MTUwLCAzMn19IiwKICAgICAgICAgICJ1dWlkIiA6ICJFRjhCMzA5Ni1GRDc0LTQ1QkUtQjc0Qi1GNjA1NEM0QzlENzIiLAogICAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgICAiYWxpZ25tZW50IiA6ICJjZW50ZXIiLAogICAgICAgICAgInRleHQiIDogIu+8jyIsCiAgICAgICAgICAibmFtZSIgOiAiIiwKICAgICAgICAgICJmb250X3NpemUiIDogMTgKICAgICAgICB9LAogICAgICAgICJzZWxlY3RlZCIgOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgIm5vZGVzIiA6IFsKCiAgICAgICAgXSwKICAgICAgICAiZnJhbWUiIDogInt7MjM0LCAyNjkuMzMzMzMzMzMzMzMzMzF9LCB7MTAwLCA1MX19IiwKICAgICAgICAiY2xhc3MiIDogIkxhYmVsIiwKICAgICAgICAiYXR0cmlidXRlcyIgOiB7CiAgICAgICAgICAiZmxleCIgOiAiTFJUQiIsCiAgICAgICAgICAiZm9udF9uYW1lIiA6ICI8U3lzdGVtPiIsCiAgICAgICAgICAiZnJhbWUiIDogInt7OTYsIDI4Mn0sIHsxNTAsIDMyfX0iLAogICAgICAgICAgInV1aWQiIDogIkVGOEIzMDk2LUZENzQtNDVCRS1CNzRCLUY2MDU0QzRDOUQ3MiIsCiAgICAgICAgICAiY2xhc3MiIDogIkxhYmVsIiwKICAgICAgICAgICJhbGlnbm1lbnQiIDogImNlbnRlciIsCiAgICAgICAgICAidGV4dCIgOiAiIiwKICAgICAgICAgICJuYW1lIiA6ICJMYXRpdHVkZSIsCiAgICAgICAgICAiZm9udF9zaXplIiA6IDIwCiAgICAgICAgfSwKICAgICAgICAic2VsZWN0ZWQiIDogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJub2RlcyIgOiBbCgogICAgICAgIF0sCiAgICAgICAgImZyYW1lIiA6ICJ7ezUuNjY2NjY2NjY2NjY2NjY2MSwgOTIuNjY2NjY2NjY2NjY2NjU3fSwgezk1Ljk5OTk5OTk5OTk5OTk4NiwgNTF9fSIsCiAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgImF0dHJpYnV0ZXMiIDogewogICAgICAgICAgImZsZXgiIDogIkxSVEIiLAogICAgICAgICAgImZvbnRfbmFtZSIgOiAiPFN5c3RlbT4iLAogICAgICAgICAgImZyYW1lIiA6ICJ7ezk2LCAyODJ9LCB7MTUwLCAzMn19IiwKICAgICAgICAgICJ1dWlkIiA6ICJFRjhCMzA5Ni1GRDc0LTQ1QkUtQjc0Qi1GNjA1NEM0QzlENzIiLAogICAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgICAiYWxpZ25tZW50IiA6ICJsZWZ0IiwKICAgICAgICAgICJ0ZXh0IiA6ICLmt7HjgZU6IiwKICAgICAgICAgICJuYW1lIiA6ICIiLAogICAgICAgICAgImZvbnRfc2l6ZSIgOiAxOAogICAgICAgIH0sCiAgICAgICAgInNlbGVjdGVkIiA6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAibm9kZXMiIDogWwoKICAgICAgICBdLAogICAgICAgICJmcmFtZSIgOiAie3sxMDAsIDkyLjY2NjY2NjY2NjY2NjY1N30sIHsyMzQsIDUxfX0iLAogICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICJhdHRyaWJ1dGVzIiA6IHsKICAgICAgICAgICJmbGV4IiA6ICJMUlRCIiwKICAgICAgICAgICJmb250X25hbWUiIDogIjxTeXN0ZW0+IiwKICAgICAgICAgICJmcmFtZSIgOiAie3s5NiwgMjgyfSwgezE1MCwgMzJ9fSIsCiAgICAgICAgICAidXVpZCIgOiAiRUY4QjMwOTYtRkQ3NC00NUJFLUI3NEItRjYwNTRDNEM5RDcyIiwKICAgICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICAgImFsaWdubWVudCIgOiAiY2VudGVyIiwKICAgICAgICAgICJ0ZXh0IiA6ICIiLAogICAgICAgICAgIm5hbWUiIDogIkRlcHRoIiwKICAgICAgICAgICJmb250X3NpemUiIDogMjAKICAgICAgICB9LAogICAgICAgICJzZWxlY3RlZCIgOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgIm5vZGVzIiA6IFsKCiAgICAgICAgXSwKICAgICAgICAiZnJhbWUiIDogInt7NS42NjY2NjY2NjY2NjY2NjYxLCAxNTEuNjY2NjY2NjY2NjY2NjZ9LCB7OTUuOTk5OTk5OTk5OTk5OTg2LCA1MX19IiwKICAgICAgICAiY2xhc3MiIDogIkxhYmVsIiwKICAgICAgICAiYXR0cmlidXRlcyIgOiB7CiAgICAgICAgICAiZmxleCIgOiAiTFJUQiIsCiAgICAgICAgICAiZm9udF9uYW1lIiA6ICI8U3lzdGVtPiIsCiAgICAgICAgICAiZnJhbWUiIDogInt7OTYsIDI4Mn0sIHsxNTAsIDMyfX0iLAogICAgICAgICAgInV1aWQiIDogIkVGOEIzMDk2LUZENzQtNDVCRS1CNzRCLUY2MDU0QzRDOUQ3MiIsCiAgICAgICAgICAiY2xhc3MiIDogIkxhYmVsIiwKICAgICAgICAgICJhbGlnbm1lbnQiIDogImxlZnQiLAogICAgICAgICAgInRleHQiIDogIumch+W6pjoiLAogICAgICAgICAgIm5hbWUiIDogIiIsCiAgICAgICAgICAiZm9udF9zaXplIiA6IDE4CiAgICAgICAgfSwKICAgICAgICAic2VsZWN0ZWQiIDogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJub2RlcyIgOiBbCgogICAgICAgIF0sCiAgICAgICAgImZyYW1lIiA6ICJ7ezEwMCwgMTUxLjY2NjY2NjY2NjY2NjY2fSwgezIzNCwgNTF9fSIsCiAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgImF0dHJpYnV0ZXMiIDogewogICAgICAgICAgImZsZXgiIDogIkxSVEIiLAogICAgICAgICAgImZvbnRfbmFtZSIgOiAiPFN5c3RlbT4iLAogICAgICAgICAgImZyYW1lIiA6ICJ7ezk2LCAyODJ9LCB7MTUwLCAzMn19IiwKICAgICAgICAgICJ1dWlkIiA6ICJFRjhCMzA5Ni1GRDc0LTQ1QkUtQjc0Qi1GNjA1NEM0QzlENzIiLAogICAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgICAiYWxpZ25tZW50IiA6ICJjZW50ZXIiLAogICAgICAgICAgInRleHQiIDogIiIsCiAgICAgICAgICAibmFtZSIgOiAiQ2FsY2ludGVuc2l0eSIsCiAgICAgICAgICAiZm9udF9zaXplIiA6IDIwCiAgICAgICAgfSwKICAgICAgICAic2VsZWN0ZWQiIDogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJub2RlcyIgOiBbCgogICAgICAgIF0sCiAgICAgICAgImZyYW1lIiA6ICJ7ezYsIDIxMH0sIHsxMDUsIDUxfX0iLAogICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICJhdHRyaWJ1dGVzIiA6IHsKICAgICAgICAgICJmbGV4IiA6ICJMUlRCIiwKICAgICAgICAgICJmb250X25hbWUiIDogIjxTeXN0ZW0+IiwKICAgICAgICAgICJmcmFtZSIgOiAie3s5NiwgMjgyfSwgezE1MCwgMzJ9fSIsCiAgICAgICAgICAidXVpZCIgOiAiRUY4QjMwOTYtRkQ3NC00NUJFLUI3NEItRjYwNTRDNEM5RDcyIiwKICAgICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICAgImFsaWdubWVudCIgOiAibGVmdCIsCiAgICAgICAgICAidGV4dCIgOiAi5Zyw6ZyH44Gu6KaP5qihOiIsCiAgICAgICAgICAibmFtZSIgOiAiIiwKICAgICAgICAgICJmb250X3NpemUiIDogMTgKICAgICAgICB9LAogICAgICAgICJzZWxlY3RlZCIgOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgIm5vZGVzIiA6IFsKCiAgICAgICAgXSwKICAgICAgICAiZnJhbWUiIDogInt7MTQ3LCAyMTB9LCB7NDAsIDUwfX0iLAogICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICJhdHRyaWJ1dGVzIiA6IHsKICAgICAgICAgICJmbGV4IiA6ICJMUlRCIiwKICAgICAgICAgICJmb250X25hbWUiIDogIjxTeXN0ZW0+IiwKICAgICAgICAgICJmcmFtZSIgOiAie3s5NiwgMjgyfSwgezE1MCwgMzJ9fSIsCiAgICAgICAgICAidXVpZCIgOiAiRUY4QjMwOTYtRkQ3NC00NUJFLUI3NEItRjYwNTRDNEM5RDcyIiwKICAgICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICAgImFsaWdubWVudCIgOiAiY2VudGVyIiwKICAgICAgICAgICJ0ZXh0IiA6ICIiLAogICAgICAgICAgIm5hbWUiIDogIk1hZ3VuaXR1ZGUiLAogICAgICAgICAgImZvbnRfc2l6ZSIgOiAyMAogICAgICAgIH0sCiAgICAgICAgInNlbGVjdGVkIiA6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAibm9kZXMiIDogWwoKICAgICAgICBdLAogICAgICAgICJmcmFtZSIgOiAie3sxMjksIDMyOH0sIHsyMDUsIDUxfX0iLAogICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICJhdHRyaWJ1dGVzIiA6IHsKICAgICAgICAgICJmbGV4IiA6ICJMUlRCIiwKICAgICAgICAgICJmb250X3NpemUiIDogMjAsCiAgICAgICAgICAiZnJhbWUiIDogInt7OTYsIDI4Mn0sIHsxNTAsIDMyfX0iLAogICAgICAgICAgInV1aWQiIDogIkVGOEIzMDk2LUZENzQtNDVCRS1CNzRCLUY2MDU0QzRDOUQ3MiIsCiAgICAgICAgICAiY2xhc3MiIDogIkxhYmVsIiwKICAgICAgICAgICJhbGlnbm1lbnQiIDogImNlbnRlciIsCiAgICAgICAgICAidGV4dCIgOiAiIiwKICAgICAgICAgICJuYW1lIiA6ICJBbGVydGZsZyIsCiAgICAgICAgICAiZm9udF9uYW1lIiA6ICI8U3lzdGVtPiIKICAgICAgICB9LAogICAgICAgICJzZWxlY3RlZCIgOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgIm5vZGVzIiA6IFsKCiAgICAgICAgXSwKICAgICAgICAiZnJhbWUiIDogInt7NiwgMzI4LjMzMzMzMzMzMzMzMzMxfSwgezEzMSwgNTF9fSIsCiAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgImF0dHJpYnV0ZXMiIDogewogICAgICAgICAgImZsZXgiIDogIkxSVEIiLAogICAgICAgICAgImZvbnRfbmFtZSIgOiAiPFN5c3RlbT4iLAogICAgICAgICAgImZyYW1lIiA6ICJ7ezk2LCAyODJ9LCB7MTUwLCAzMn19IiwKICAgICAgICAgICJ1dWlkIiA6ICJFRjhCMzA5Ni1GRDc0LTQ1QkUtQjc0Qi1GNjA1NEM0QzlENzIiLAogICAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgICAiYWxpZ25tZW50IiA6ICJsZWZ0IiwKICAgICAgICAgICJ0ZXh0IiA6ICLjgqLjg6njg7zjg4jlvaLlvI86IiwKICAgICAgICAgICJmb250X3NpemUiIDogMTgsCiAgICAgICAgICAibmFtZSIgOiAiIgogICAgICAgIH0sCiAgICAgICAgInNlbGVjdGVkIiA6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAibm9kZXMiIDogWwoKICAgICAgICBdLAogICAgICAgICJmcmFtZSIgOiAie3s1LjY2NjY2NjY2NjY2NjY1NzIsIDQxOH0sIHszMjgsIDUxfX0iLAogICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICJhdHRyaWJ1dGVzIiA6IHsKICAgICAgICAgICJmbGV4IiA6ICJMUlRCIiwKICAgICAgICAgICJuYW1lIiA6ICJUaW1lIiwKICAgICAgICAgICJmcmFtZSIgOiAie3s5NSwgMjgxfSwgezE1MCwgMzJ9fSIsCiAgICAgICAgICAidXVpZCIgOiAiOEY4RjUxODItQzBEQy00MDMwLUI5QzItMTYyQzUyNkIxREJCIiwKICAgICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICAgImFsaWdubWVudCIgOiAiY2VudGVyIiwKICAgICAgICAgICJ0ZXh0IiA6ICIiLAogICAgICAgICAgImZvbnRfc2l6ZSIgOiAyNSwKICAgICAgICAgICJmb250X25hbWUiIDogIjxTeXN0ZW0+IgogICAgICAgIH0sCiAgICAgICAgInNlbGVjdGVkIiA6IGZhbHNlCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAibm9kZXMiIDogWwoKICAgICAgICBdLAogICAgICAgICJmcmFtZSIgOiAie3sxMTksIDIxMH0sIHszNSwgNTF9fSIsCiAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgImF0dHJpYnV0ZXMiIDogewogICAgICAgICAgImZsZXgiIDogIkxSVEIiLAogICAgICAgICAgImZvbnRfc2l6ZSIgOiAyNSwKICAgICAgICAgICJmcmFtZSIgOiAie3s5NiwgMjgyfSwgezE1MCwgMzJ9fSIsCiAgICAgICAgICAidXVpZCIgOiAiRUY4QjMwOTYtRkQ3NC00NUJFLUI3NEItRjYwNTRDNEM5RDcyIiwKICAgICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICAgImFsaWdubWVudCIgOiAiY2VudGVyIiwKICAgICAgICAgICJ0ZXh0IiA6ICJNIiwKICAgICAgICAgICJuYW1lIiA6ICIiLAogICAgICAgICAgImZvbnRfbmFtZSIgOiAiPFN5c3RlbT4iCiAgICAgICAgfSwKICAgICAgICAic2VsZWN0ZWQiIDogZmFsc2UKICAgICAgfSwKICAgICAgewogICAgICAgICJub2RlcyIgOiBbCgogICAgICAgIF0sCiAgICAgICAgImZyYW1lIiA6ICJ7ezYsIDUwNX0sIHsxMTUsIDUxfX0iLAogICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICJhdHRyaWJ1dGVzIiA6IHsKICAgICAgICAgICJmbGV4IiA6ICJMUlRCIiwKICAgICAgICAgICJuYW1lIiA6ICIiLAogICAgICAgICAgImZyYW1lIiA6ICJ7ezk2LCAyODJ9LCB7MTUwLCAzMn19IiwKICAgICAgICAgICJ1dWlkIiA6ICJFRjhCMzA5Ni1GRDc0LTQ1QkUtQjc0Qi1GNjA1NEM0QzlENzIiLAogICAgICAgICAgImNsYXNzIiA6ICJMYWJlbCIsCiAgICAgICAgICAiYWxpZ25tZW50IiA6ICJsZWZ0IiwKICAgICAgICAgICJ0ZXh0IiA6ICLjgqLjgq/jgrvjgrnnirbms4E6IiwKICAgICAgICAgICJmb250X3NpemUiIDogMTgsCiAgICAgICAgICAiZm9udF9uYW1lIiA6ICI8U3lzdGVtPiIKICAgICAgICB9LAogICAgICAgICJzZWxlY3RlZCIgOiBmYWxzZQogICAgICB9LAogICAgICB7CiAgICAgICAgIm5vZGVzIiA6IFsKCiAgICAgICAgXSwKICAgICAgICAiZnJhbWUiIDogInt7MTE5LCA1MDV9LCB7NDYsIDUxfX0iLAogICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICJhdHRyaWJ1dGVzIiA6IHsKICAgICAgICAgICJmbGV4IiA6ICJMUlRCIiwKICAgICAgICAgICJmb250X25hbWUiIDogIjxTeXN0ZW0+IiwKICAgICAgICAgICJmcmFtZSIgOiAie3s5NiwgMjgyfSwgezE1MCwgMzJ9fSIsCiAgICAgICAgICAidXVpZCIgOiAiRUY4QjMwOTYtRkQ3NC00NUJFLUI3NEItRjYwNTRDNEM5RDcyIiwKICAgICAgICAgICJjbGFzcyIgOiAiTGFiZWwiLAogICAgICAgICAgImFsaWdubWVudCIgOiAibGVmdCIsCiAgICAgICAgICAidGV4dCIgOiAiIiwKICAgICAgICAgICJuYW1lIiA6ICJpc19BY2Nlc3MiLAogICAgICAgICAgImZvbnRfc2l6ZSIgOiAyMAogICAgICAgIH0sCiAgICAgICAgInNlbGVjdGVkIiA6IGZhbHNlCiAgICAgIH0KICAgIF0sCiAgICAiZnJhbWUiIDogInt7MCwgMH0sIHszNDAsIDU5NH19IiwKICAgICJjbGFzcyIgOiAiVmlldyIsCiAgICAiYXR0cmlidXRlcyIgOiB7CiAgICAgICJmbGV4IiA6ICIiLAogICAgICAiY3VzdG9tX2NsYXNzIiA6ICIiLAogICAgICAiZW5hYmxlZCIgOiB0cnVlLAogICAgICAidGludF9jb2xvciIgOiAiUkdCQSgwLjAwMDAwMCwwLjQ3ODAwMCwxLjAwMDAwMCwxLjAwMDAwMCkiLAogICAgICAiYm9yZGVyX2NvbG9yIiA6ICJSR0JBKDAuMDAwMDAwLDAuMDAwMDAwLDAuMDAwMDAwLDEuMDAwMDAwKSIsCiAgICAgICJiYWNrZ3JvdW5kX2NvbG9yIiA6ICJSR0JBKDEuMDAwMDAwLDEuMDAwMDAwLDEuMDAwMDAwLDEuMDAwMDAwKSIsCiAgICAgICJuYW1lIiA6ICLlvLfpnIfjg6Ljg4vjgr/jg7wiCiAgICB9LAogICAgInNlbGVjdGVkIiA6IGZhbHNlCiAgfQpd')

class EEWUIs(ui.View):
	def will_close(self):
		Closed[0] = '1'

def filetimeformat():
	year = '{}'.format(datetime.now().year)
	if datetime.now().month <= 9:
		month = '0{}'.format(datetime.now().month)
	else:
		month = '{}'.format(datetime.now().month)
	if datetime.now().day <= 9:
		day = '0{}'.format(datetime.now().day)
	else:
		day = '{}'.format(datetime.now().day)
	if datetime.now().hour <= 9:
		hour = '0{}'.format(datetime.now().hour)
	else:
		hour = '{}'.format(datetime.now().hour)
	if datetime.now().minute <= 9:
		minute = '0{}'.format(datetime.now().minute)
	else:
		minute = '{}'.format(datetime.now().minute)
	if datetime.now().second <= 9:
		second = '0{}'.format(datetime.now().second)
	else:
		second = '{}'.format(datetime.now().second)
	return '{}{}{}{}{}{}.json'.format(year, month, day, hour, minute, second)

def time_text():
	year = '{}'.format(datetime.now().year)
	if datetime.now().month <= 9:
		month = '0{}'.format(datetime.now().month)
	else:
		month = '{}'.format(datetime.now().month)
	if datetime.now().day <= 9:
		day = '0{}'.format(datetime.now().day)
	else:
		day = '{}'.format(datetime.now().day)
	if datetime.now().hour <= 9:
		hour = '0{}'.format(datetime.now().hour)
	else:
		hour = '{}'.format(datetime.now().hour)
	if datetime.now().minute <= 9:
		minute = '0{}'.format(datetime.now().minute)
	else:
		minute = '{}'.format(datetime.now().minute)
	if datetime.now().second <= 9:
		second = '0{}'.format(datetime.now().second)
	else:
		second = '{}'.format(datetime.now().second)
	return '{}/{}/{} {}:{}:{}'.format(year, month, day, hour, minute, second)

def getjson():
	try:
		return json.loads(urllib.request.urlopen(urllib.request.Request('http://www.kmoni.bosai.go.jp/webservice/hypo/eew/{}'.format(filetimeformat()), headers=User_Agent), timeout=3).read().decode(errors='ignore'))
	except:
		return ''

EEWUIview = ui.load_view_str(UIView)
def TimeSetText():
	while True:
		if Closed[0] == '1':
			break
		EEWUIview['Time'].text = time_text()
		time.sleep(1)

def main():
	while True:
		if Closed[0] == '1':
			break
		try:
			eewjson = getjson()
			if not eewjson == '':
				EEWUIview['is_Access'].text = '成功'
				is_cancel = eewjson['is_cancel'] #キャンセル報
				is_final = eewjson['is_final'] #終了報

				EEWUIview['regionName'].text = eewjson['region_name'] #発生場所
				EEWUIview['Depth'].text = eewjson['depth'] #深さ
				EEWUIview['Calcintensity'].text = eewjson['calcintensity'] #強さ
				EEWUIview['Magunitude'].text = eewjson['magunitude'] #マグニチュード
				EEWUIview['Longitude'].text = eewjson['longitude'] #経度
				EEWUIview['Latitude'].text = eewjson['latitude'] #緯度
				try:
					EEWUIview['Alertflg'].text = eewjson['alertflg'] #警報かどうか
				except:
					EEWUIview['Alertflg'].text = ''
			else:
				EEWUIview['is_Access'].text = '失敗'
			time.sleep(0.98)
		except KeyboardInterrupt:
			break

EEWUIview.present('panel')
concurrent.futures.ThreadPoolExecutor().submit(main)
concurrent.futures.ThreadPoolExecutor().submit(TimeSetText)

